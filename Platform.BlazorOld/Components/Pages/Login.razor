@page "/login"
@inject Platform.Blazor.Services.IAuthService Auth
@inject NavigationManager Nav

<h3>Login</h3>

<input @bind="UserNameOrEmail" placeholder="Username or Email" />
<input type="password" @bind="Password" placeholder="Password" />
<button @onclick="DoLogin">Login</button>

@code {
    string UserNameOrEmail = "";
    string Password = "";

    async Task DoLogin()
    {
        var token = await Auth.LoginAsync(new Platform.Api.Models.LoginRequest(UserNameOrEmail, Password));
        if (token != null)
        {
            Nav.NavigateTo("/dashboard");
        }
        else
        {
            // show message (left simple)
            Console.WriteLine("Login failed");
        }
    }
}